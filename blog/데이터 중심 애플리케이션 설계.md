## 1장. 신뢰할 수 있고 확장 가능하며 유지보수하기 쉬운 애플리케이션
오늘날 많은 애플리케이션은 계산 중심보다는 데이터 중심적이다. 이는 데이터의 양, 데이터의 복잡도, 데이터의 변화 속도가 애플리케이션을 좌우한다고 볼 수 있다.

### 데이터 시스템에 대한 생각
일반적으로 데이터베이스, 큐, 캐시 등을 매우 다른 범주에 속하는 도구로 생각한다. 데이터베이스와 메시지 큐는 얼마동안 데이터를 저장한다는 부분에서 표면적으로 비슷하지만, 매우 다른 접근 패턴을 갖고 있어 서로 다른 성능 특성이 있기 때문에 구현 방식이 다르다.

그러면 모든 것을 왜 데이터 시스템이라는 포괄적 용어로 묶어야 하는걸까?
1. 분류 간 경계가 흐려지고 있다.
2. 점점 더 많은 애플리케이션이 단일 도구로는 더 이상 데이터 처리와 저장 모두를 만족시킬 수 없는 광범위한 요구사항을 갖고 있다.

개발자의 기술 숙련도, 기존 시스템의 의존성 등 시스템 설계에 영향을 줄 수 있는 요소는 다양하다.
여기서는 대부분의 소프트웨어 시스템에서 중요하게 여기는 세가지 관심사에 중점을 둔다.

### 신뢰성
소프트웨어의 신뢰성에서 일반적인 기대치는 다음과 같다.
* 애플리케이션은 사용자가 기대한 기능을 수행한다.
* 시스템은 사용자가 범한 실수나 예상치 못한 소프트웨어 사용법을 허용할 수 있다.
* 시스템 성능은 예상된 부하와 데이터 양에서 필수적인 사용 사례를 충분히 만족한다.
* 시스템은 허가되지 않은 접근과 오남용을 방지한다.

잘못될 수 있는 일을 `결함(fault)`이라고 부른다. 그리고 결함을 예측하고 대처할 수 있는 시스템을 `내결함성(fault-olerant)` 또는 `탄력성(resilient)`을 지녔다고 말한다.

결함은 `장애(failure)`와 동일하지 않다. 일반적으로 결함은 사양에서 벗어난 시스템의 한 구성 요소로 정의되지만, 장애는 사용자에게 필요한 서비스를 제공하지 못하고 시스템 전체가 멈춘 경우다.

#### 하드웨어 결함
시스템 장애의 가장 흔한 원인이라고 생각한다. 시스템 장애율을 줄이기 위한 첫번째 대응으로 각 하드웨어 구성 요소에 중복을 추가하는 방법이 일반적이다.
현재는 소프트웨어 내결함성 기술을 사용하거나 하드웨어 중복성을 추가해 전체 장비의 손실을 견딜 수 있는 시스템으로 점점 옮겨가고 있다. 이런 시스템은 장비를 재부팅하는 경우 전체 시스템의 중단시간없이 한 번에 한 노드씩 패치할 수 있다.

#### 소프트웨어 오류
시스템 내 `체계적 오류(systematic error)`가 있다. 이 결함은 예상기가 더 어렵고 노드 간 상관관계 때문에 하드웨어 결함보다 오히려 시스템 오류를 더욱 많이 유발하는 경향이 있다.
소프트웨어의 체계적 오류 문제는 신속한 해결책이 없다.

* 시스템의 가정과 상호작용에 대해 주의 깊게 생각하기
* 빈틈없는 테스트
* 프로세스 격리 및 죽은 프로세스의 재시작 허용
* 프로덕션 환경에서 시스템 동작의 측정, 모니터링, 분석하기

이러한 작은 일들이 문제 해결에 도움을 줄 수 있다.

#### 인적 오류
운영자의 설정 오류가 중단의 주요 원인에 해당한다고 한다.
그럼에도 불구하고 시스템을 어떻게 신뢰성 있게 만들 수 있을까?

* 오류의 가능성을 최소화하는 방향으로 시스템을 설계하라. (잘 설계된 추상화, API, 관리 인터페이스 사용)
* 사람이 가장 많이 실수하는 부분에서 사람의 실수로 장애가 발생할 수 있는 부분을 분리하라.
* 단위 테스트부터 전체 시스템 통합 테스트까지 모든 수준에서 철저하게 테스트하라.
* 장애 발생의 영향을 최소화하기 위해 인적 오류를 빠르고 쉽게 복구할 수 있게 하라.
* 성능 지표와 요류율 같은 상세하고 명확한 모니터링 대책을 마련하라.
* 조작 교육과 실습을 실행하라.